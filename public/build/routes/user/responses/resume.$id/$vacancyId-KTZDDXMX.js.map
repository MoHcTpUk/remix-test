{
  "version": 3,
  "sources": ["../../../../../../app/routes/user/responses/resume.$id/$vacancyId.tsx", "../../../../../../app/components/pages/User/Responses/components/Resumes/InnerResponsesVacancyComponent/index.tsx", "../../../../../../app/components/pages/User/Responses/components/Resumes/InnerResponsesVacancyComponent/styles.ts"],
  "sourcesContent": ["import type { ActionArgs, LoaderArgs } from '@remix-run/cloudflare';\nimport { json } from '@remix-run/cloudflare';\nimport { useActionData, useLoaderData } from '@remix-run/react';\nimport qs from 'qs';\nimport { ClientFactory } from 'shared/clientFactory';\nimport { ResponsesApi } from 'shared/v2/responses';\nimport { VacanciesApi } from 'shared/v2/vacancies';\n\nimport InnerResponsesVacancyComponent from '~/components/pages/User/Responses/components/Resumes/InnerResponsesVacancyComponent';\nimport { getMessageContext } from '~/storages/message.server';\nimport { ResponseState } from '~/types/enums/responseState';\nimport { successAccessMessage } from '~/utils/messages';\n\nexport const loader = async ({ context, request, params }: LoaderArgs) => {\n  const clientResponses = ClientFactory.createClient(ResponsesApi, context.session);\n  const clientVacancies = ClientFactory.createClient(VacanciesApi, context.session);\n  const { url } = request;\n  const responseId = url.split('?')[1].split('=')[1];\n  const { vacancyId } = params;\n\n  const [genders, specializations, location, employment, workfeatures, response, vacancy] =\n    await Promise.all([\n      context.references.gendersMap,\n      context.references.specializationsMap,\n      context.references.locationMap,\n      context.references.employmentsMap,\n      context.references.workFeaturesMap,\n      clientResponses.getResponse({ id: responseId }),\n      clientVacancies.getVacancy({ id: vacancyId || '' }),\n    ]);\n\n  const dictionaries = {\n    genders: genders.ToArray(),\n    specializations: specializations.ToArray(),\n    location: location.ToArray(),\n    employment: employment.ToArray(),\n    workfeatures: workfeatures.ToArray(),\n  };\n\n  return json({ vacancy, dictionaries, response });\n};\n\nexport const action = async ({ request, context }: ActionArgs) => {\n  const text = await request.text();\n  const { ...data } = qs.parse(text);\n\n  const clientResponses = ClientFactory.createClient(ResponsesApi, context.session);\n  const messageContextStorage = await getMessageContext(request);\n\n  const responseId = data?.responseId;\n  try {\n    if (responseId) {\n      await clientResponses.patchResponse({\n        id: responseId.toString(),\n        response: {\n          id: responseId.toString(),\n          state: ResponseState.APPROVED,\n        },\n      });\n\n      const headers: HeadersInit = new Headers();\n\n      messageContextStorage.setSuccessMessage(\n        '',\n        successAccessMessage(context.userContext.language),\n      );\n      headers.append('Set-Cookie', await messageContextStorage.commit());\n    }\n    return json(\n      {\n        success: true,\n        message: {\n          en: 'Successfully!',\n          th: 'สำเร็จ!',\n        },\n      },\n      { headers: { 'Set-Cookie': await messageContextStorage.commit() } },\n    );\n  } catch (e) {\n    const headers: HeadersInit = new Headers();\n\n    messageContextStorage.setErrorMessage(\n      context.userContext.language === 'en' ? 'Something went wrong' : 'มีบางอย่างผิดพลาด',\n      context.userContext.language === 'en' ? 'Error' : 'ข้อผิดพลาด',\n    );\n\n    headers.append('Set-Cookie', await messageContextStorage.commit());\n    console.log(e);\n    return json({\n      success: false,\n      message: {\n        en: 'Something went wrong',\n        th: 'มีบางอย่างผิดพลาด',\n      },\n    });\n  }\n};\n\nexport default function ResponseVacancyIndex() {\n  const request = useLoaderData<typeof loader>();\n  const actionData = useActionData<typeof action>();\n\n  const { vacancy, response, dictionaries } = request;\n\n  return (\n    <InnerResponsesVacancyComponent\n      vacancy={vacancy}\n      response={response}\n      responseAction={actionData?.success}\n      dictionaries={dictionaries}\n    />\n  );\n}\n", "import { useMatches } from '@remix-run/react';\nimport { useState } from 'react';\nimport type { Response } from 'shared/v2/responses';\nimport type { Resume } from 'shared/v2/resumes';\nimport type { Vacancy } from 'shared/v2/vacancies';\n\nimport ResponseTypeHeading from '~/components/common/ResponseTypeStatus';\nimport { VacancyFullCardWidget } from '~/components/entities/cardWidgets';\nimport type { IDictionaries } from '~/types/interfaces/iDictionaries';\n\nimport { BoxContainer } from './styles';\n\nexport default function InnerResponsesVacancyComponent({\n  vacancy,\n  myResumes,\n  dictionaries,\n  handleClickShare,\n  response,\n  responseAction,\n}: {\n  vacancy?: Vacancy | null;\n  myResumes?: Resume[] | null;\n  dictionaries?: IDictionaries;\n  handleClickShare?: (id?: string) => void;\n  response?: Response;\n  responseAction?: boolean;\n}) {\n  const [visibleRequest, setVisibleRequest] = useState(false);\n\n  const handleRequest = () => {\n    setVisibleRequest(!visibleRequest);\n  };\n\n  const matches = useMatches();\n\n  const selectResume: Resume = matches[3].data?.resume;\n\n  return (\n    <BoxContainer>\n      <VacancyFullCardWidget\n        vacancy={vacancy}\n        dictionaries={dictionaries}\n        handleRequest={handleRequest}\n        stateResponse={response?.state}\n        typeResponse={response?.shared_id === selectResume?.id ? 'REQUEST' : 'INVITATION'}\n        responseId={response?.id}\n        variant='response'\n        responseAction={responseAction}\n        status={\n          <ResponseTypeHeading\n            type={response?.shared_id === selectResume?.id ? 'REQUEST' : 'INVITATION'}\n            state={response?.state}\n            position='relative'\n            onlyContainer\n          />\n        }\n      />\n    </BoxContainer>\n  );\n}\n", "import { styled } from 'styled-components';\n\nexport const BoxContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: sticky;\n  width: 100%;\n  align-items: center;\n  min-height: 100%;\n  justify-content: center;\n  gap: 16px;\n  @media (min-width: 1280px) {\n    min-height: 100%;\n    top: 0;\n    /* overflow: hidden; */\n    justify-content: flex-start;\n    gap: 24px;\n  }\n`;\n\nexport const BoxControl = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-top: 1px solid ${({ theme }) => theme.user.borderColor};\n\n  form {\n    align-items: center;\n    padding-top: 16px;\n  }\n\n  @media (min-width: 768px) {\n    align-items: flex-end;\n\n    form {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      align-items: center;\n      width: 100%;\n      align-items: flex-end;\n    }\n  }\n\n  @media (min-width: 1280px) {\n    .requestCard {\n      justify-content: center;\n    }\n  }\n`;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,wBAAqB;AACrB;AACA,gBAAe;;;ACHf;AACA,IAAAA,gBAAyB;;;ACClB,IAAM,eAAe,sCAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkB5B,IAAM,aAAa,sCAAO;AAAA;AAAA;AAAA;AAAA,0BAIP,CAAC,EAAE,MAAM,MAAM,MAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ADyB1C;AArCK,SAAf,+BAAuD;EACrDC;EACAC;EACAC;EACAC;EACAC;EACAC;AAQF,GAAG;AACD,QAAM,CAACC,gBAAgBC,iBAAiB,QAAIC,wBAAS,KAAK;AAE1D,QAAMC,gBAAgBA,MAAM;AAC1BF,sBAAkB,CAACD,cAAc;EACnC;AAEA,QAAMI,UAAUC,WAAW;AAE3B,QAAMC,eAAuBF,QAAQ,CAAC,EAAEG,MAAMC;AAE9C,SACE,mDAAC,gBACC,6DAAC,yBACC,SACA,cACA,eACA,eAAeV,UAAUW,OACzB,cAAcX,UAAUY,cAAcJ,cAAcK,KAAK,YAAY,cACrE,YAAYb,UAAUa,IACtB,SAAQ,YACR,gBACA,QACE,mDAAC,8BACC,MAAMb,UAAUY,cAAcJ,cAAcK,KAAK,YAAY,cAC7D,OAAOb,UAAUW,OACjB,UAAS,YACT,eAAa,QAJf;;;;SAIe,KAdnB;;;;SAgBG,KAjBL;;;;SAmBA;AAEJ;;;ADlDA,qBAAkC;AAgG9B,IAAAG,0BAAA;AAPW,SAAf,uBAA+C;AAC7C,QAAMC,UAAUC,cAA6B;AAC7C,QAAMC,aAAaC,cAA6B;AAEhD,QAAM;IAAEC;IAASC;IAAUC;EAAa,IAAIN;AAE5C,SACE,oDAAC,kCACC,SACA,UACA,gBAAgBE,YAAYK,SAC5B,gBAJF;;;;SAI6B;AAGjC;",
  "names": ["import_react", "vacancy", "myResumes", "dictionaries", "handleClickShare", "response", "responseAction", "visibleRequest", "setVisibleRequest", "useState", "handleRequest", "matches", "useMatches", "selectResume", "data", "resume", "state", "shared_id", "id", "import_jsx_dev_runtime", "request", "useLoaderData", "actionData", "useActionData", "vacancy", "response", "dictionaries", "success"]
}
