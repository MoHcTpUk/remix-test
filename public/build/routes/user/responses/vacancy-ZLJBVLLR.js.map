{
  "version": 3,
  "sources": ["../../../../../app/routes/user/responses/vacancy.tsx", "../../../../../app/components/pages/User/Responses/components/Vacancies/index.tsx"],
  "sourcesContent": ["import { json, type LoaderArgs, redirect } from '@remix-run/cloudflare';\nimport { Outlet, useLoaderData } from '@remix-run/react';\nimport { memo } from 'react';\nimport { ClientFactory } from 'shared/clientFactory';\nimport { ResponsesApi } from 'shared/v2/responses';\nimport type { Vacancy } from 'shared/v2/vacancies';\nimport { VacanciesApi } from 'shared/v2/vacancies';\n\nimport { Box } from '~/components/common/Box';\nimport { ResponsesVacanciesComponent } from '~/components/pages/User/Responses/components/Vacancies';\nimport { getPaginationPages } from '~/utils/helpers.client';\n\nexport const loader = async ({ context, request }: LoaderArgs) => {\n  if (!context.userContext.user.isAuthenticated) {\n    return redirect('/', {\n      status: 302,\n    });\n  }\n  const url = new URL(request.url);\n  const max_page_size = url.searchParams.get('max_page_size');\n  const current_token = url.searchParams.get('current_token');\n  const current_page = url.searchParams.get('current_page');\n  const max_pages = url.searchParams.get('max_pages');\n\n  const pages = getPaginationPages(current_page, max_pages);\n\n  const clientResponses = ClientFactory.createClient(ResponsesApi, context.session);\n  const clientVacancies = ClientFactory.createClient(VacanciesApi, context.session);\n\n  const [\n    genders,\n    specializations,\n    location,\n    employment,\n    workfeatures,\n    educationLevel,\n    yearsOfExperience,\n    responses,\n  ] = await Promise.all([\n    context.references.gendersMap,\n    context.references.specializationsMap,\n    context.references.locationMap,\n    context.references.employmentsMap,\n    context.references.workFeaturesMap,\n    context.references.educationLevelMap,\n    context.references.yearsOfExperienceMap,\n    clientResponses.getEntitiesResponses({\n      max_page_size: max_page_size ? +max_page_size : 10,\n      pages,\n      page_token: current_page && +current_page !== 1 && current_token ? current_token : undefined,\n      entity_type: 'VACANCY',\n    }),\n  ]);\n\n  let vacancies: Vacancy[] = [];\n  if (responses.data.length > 0) {\n    const resumeIds = responses.data.map((item) => item.entity_id).join(',');\n\n    vacancies = await clientVacancies.getBatchVacancies({ ids: resumeIds }).then((res) => res.data);\n  }\n\n  // const paginationRange = getPaginationRange(pages, responses?.max_pages, resumes?.page_tokens);\n  // const maxPages = responses.max_pages;\n\n  const pagination = {\n    max_page_size,\n    current_token,\n    current_page,\n    // paginationRange,\n    // maxPages,\n  };\n\n  const dictionaries = {\n    genders: genders.ToArray(),\n    specializations: specializations.ToArray(),\n    location: location.ToArray(),\n    employment: employment.ToArray(),\n    workfeatures: workfeatures.ToArray(),\n    educationLevel: educationLevel.ToArray(),\n    yearsOfExperience: yearsOfExperience.ToArray(),\n  };\n\n  return json({ responses, dictionaries, pagination, vacancies });\n};\n\nconst ResponsesResume = memo((): JSX.Element => {\n  const request = useLoaderData<typeof loader>();\n  const { vacancies, responses } = request;\n\n  return (\n    <Box flexDirection='column' width='100%'>\n      <ResponsesVacanciesComponent responses={responses.data} vacancies={vacancies} />\n      <Outlet />\n    </Box>\n  );\n});\n\nexport default ResponsesResume;\n", "import { Link } from '@remix-run/react';\nimport { motion } from 'framer-motion';\nimport { memo } from 'react';\nimport routes from 'shared/routing/routes';\nimport type { ResponsesGroupedByEntity } from 'shared/v2/responses';\nimport type { Vacancy } from 'shared/v2/vacancies';\n\nimport { Box } from '~/components/common/Box';\nimport BoxInformation from '~/components/common/BoxInformation';\nimport Button from '~/components/common/Button';\nimport { BoxCard } from '~/components/common/Card';\nimport ResponseAllTypeStatuses from '~/components/common/ResponseAllTypeStatuses';\nimport { Text } from '~/components/common/Text';\nimport { TextVariantEnum } from '~/components/common/Text/enums';\nimport {\n  VacancyPartCardHeading,\n  VacancyPartCardInfo,\n} from '~/components/entities/cardComponents/partCard';\nimport { MediaBox } from '~/components/ui/Card';\nimport { Divider } from '~/components/ui/Divider';\nimport { useApp, useScreenWidth } from '~/hooks';\nimport { BoxInformationEnum } from '~/types/enums/boxInformationEnum';\nimport { ResponseCardVariantEnum } from '~/types/enums/responseCardVariantEnum';\nimport type { IDictionaries } from '~/types/interfaces/iDictionaries';\n\nexport const ResponsesVacanciesComponent = memo(\n  ({\n    vacancies,\n    vacancy,\n    dictionaries,\n    responses,\n  }: {\n    vacancies?: Vacancy[] | null;\n    vacancy?: Vacancy;\n    dictionaries?: IDictionaries;\n    responses?: ResponsesGroupedByEntity[];\n  }): JSX.Element => {\n    const { theme, t } = useApp();\n    const widthScreen = useScreenWidth();\n\n    const buttonCreateVacancy = () => (\n      <Link to={routes.user.vacancy.create}>\n        <Button priority='secondary'>\n          <Text variant={TextVariantEnum.textBody2}>{t('user:create_vacancy')}</Text>\n        </Button>\n      </Link>\n    );\n\n    const getResponseStatistics = (responses?: ResponsesGroupedByEntity[], id?: string) =>\n      responses?.find((item) => item.entity_id === id)?.statistics;\n\n    const boxHeading = (vacancy: Vacancy) => (\n      <Box flexDirection='column' width='100%'>\n        <VacancyPartCardHeading\n          variant='response'\n          vacancy={vacancy}\n          variantResponseCard={ResponseCardVariantEnum.main}\n        />\n        {widthScreen >= 768 && <Divider />}\n        <VacancyPartCardInfo vacancy={vacancy} variant='response' />\n        <Box flexDirection='row' justifyContent='space-between'>\n          <ResponseAllTypeStatuses statistics={getResponseStatistics(responses, vacancy.id)} />\n        </Box>\n      </Box>\n    );\n\n    return (\n      <Box\n        flexDirection='column'\n        alignItems='flex-start'\n        width='100%'\n        gap='24px'\n        as={motion.div}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      >\n        <Box\n          flexDirection='column'\n          width='100%'\n          gap={widthScreen > 1024 ? '24px' : '16px'}\n          style={{\n            flex: '1',\n          }}\n        >\n          {/* <Heading variant='resumes' title={t('user:my_resumes')} /> */}\n\n          {!vacancies?.length && (\n            <BoxInformation\n              variant={BoxInformationEnum.info}\n              title={t('user:no_vacancies_available')}\n              information={t(\n                'user:you_dont_have_any_vacancies_yet_for_which_applicants_could_apply',\n              )}\n              button={() => buttonCreateVacancy()}\n              flexDirection='column'\n            />\n          )}\n\n          {vacancies?.map((item, index) => (\n            <Box\n              width='100%'\n              style={{\n                cursor: 'pointer',\n                borderRadius: '12px',\n                transition: 'all 0.2s cubic-bezier(0.2, 0, 0, 1)',\n                border:\n                  widthScreen > 1024 && item.id === vacancy?.id\n                    ? `2px solid ${theme.modal.borderCardsColor}`\n                    : '',\n              }}\n              key={item?.id}\n            >\n              <BoxCard key={item?.id} variant='userCard'>\n                <MediaBox variant='mobile'>\n                  <Link to={item?.id || '#'}>{boxHeading(item)}</Link>\n                </MediaBox>\n\n                <MediaBox variant='desktop'>\n                  <Link to={item?.id} preventScrollReset>\n                    {boxHeading(item)}\n                  </Link>\n                </MediaBox>\n              </BoxCard>\n            </Box>\n          ))}\n        </Box>\n      </Box>\n    );\n  },\n);\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "ResponsesVacanciesComponent", "memo", "vacancies", "vacancy", "dictionaries", "responses", "theme", "t", "useApp", "widthScreen", "useScreenWidth", "buttonCreateVacancy", "routes", "user", "create", "TextVariantEnum", "textBody2", "getResponseStatistics", "id", "find", "item", "entity_id", "statistics", "boxHeading", "ResponseCardVariantEnum", "main", "motion", "div", "opacity", "flex", "length", "BoxInformationEnum", "info", "map", "index", "cursor", "borderRadius", "transition", "border", "modal", "borderCardsColor", "import_jsx_dev_runtime", "ResponsesResume", "memo", "request", "useLoaderData", "vacancies", "responses", "data"]
}
